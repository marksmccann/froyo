"use strict";(self.webpackChunkfroyo=self.webpackChunkfroyo||[]).push([[2039],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,f=c["".concat(l,".").concat(m)]||c[m]||u[m]||o;return n?a.createElement(f,i(i({ref:t},d),{},{components:n})):a.createElement(f,i({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6002:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={},i="Handling Updates",s={unversionedId:"fundamentals/handling-updates",id:"fundamentals/handling-updates",title:"Handling Updates",description:"This guide explains how to use component state to conditionally handle updates.",source:"@site/docs/fundamentals/handling-updates.md",sourceDirName:"fundamentals",slug:"/fundamentals/handling-updates",permalink:"/froyo/docs/fundamentals/handling-updates",draft:!1,editUrl:"https://github.com/marksmccann/froyo/docs/fundamentals/handling-updates.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Component Example",permalink:"/froyo/docs/getting-started/component-example"},next:{title:"Component Lifecycle",permalink:"/froyo/docs/fundamentals/component-lifecycle"}},l={},p=[{value:"Using Basic Operators",id:"using-basic-operators",level:2},{value:"Working with Multiple States",id:"working-with-multiple-states",level:2},{value:"Handling the First Render",id:"handling-the-first-render",level:2},{value:"Using the Previous State",id:"using-the-previous-state",level:2}],d={toc:p};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"handling-updates"},"Handling Updates"),(0,r.kt)("p",null,"This guide explains how to use component state to conditionally handle updates."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"While the examples below are using ",(0,r.kt)("inlineCode",{parentName:"p"},"render"),", these principles are also applicable to ",(0,r.kt)("a",{parentName:"p",href:"/froyo/docs/api/component#validate"},(0,r.kt)("inlineCode",{parentName:"a"},"validate")),", ",(0,r.kt)("a",{parentName:"p",href:"/froyo/docs/api/component#update"},(0,r.kt)("inlineCode",{parentName:"a"},"update")),", as well as any ",(0,r.kt)("a",{parentName:"p",href:"/froyo/docs/advanced/observer-pattern"},"observers")," created with ",(0,r.kt)("inlineCode",{parentName:"p"},"subscribe"),".")),(0,r.kt)("h2",{id:"using-basic-operators"},"Using Basic Operators"),(0,r.kt)("p",null,"Use basic JavaScript operators like ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else"},"if")," and the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Conditional_Operator"},"ternary operator")," to control what actions to perform relative to the state. In the following example, a different message is rendered relative to the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"flavor"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"render() {\n    if (this.state.flavor === 'Vanilla') {\n        this.rootElement.innerHTML = 'Good choice!';\n    } else {\n        this.rootElement.innerHTML = 'Are you sure? Vanilla is better.';\n    }\n}\n")),(0,r.kt)("br",null),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"working-with-multiple-states"},"Working with Multiple States"),(0,r.kt)("p",null,"When a component has multiple state properties, use the list of state changes (which is passed as the first argument) to filter updates. As a general rule, only the logic relevant to the state changes should run, the rest should be ignored. Failing to do this properly will lead to a less efficient component that is more difficult to debug."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"render(stateChanges) {\n    if ('flavor' in stateChanges) {\n        if (this.state.flavor === 'Vanilla') {\n            this.rootElement.innerHTML = 'Good choice!';\n        } else {\n            this.rootElement.innerHTML = 'Are you sure? Vanilla is better.';\n        }\n    }\n\n    if ('large' in stateChanges) {\n        if (this.state.large) {\n            this.rootElement.classList.add('large');\n        } else {\n            this.rootElement.classList.remove('large');\n        }\n    }\n}\n")),(0,r.kt)("br",null),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"handling-the-first-render"},"Handling the First Render"),(0,r.kt)("p",null,"Some tasks only need to be performed once, during initialization. To accomplish this, use ",(0,r.kt)("inlineCode",{parentName:"p"},"initialized")," from the class property ",(0,r.kt)("a",{parentName:"p",href:"/froyo/docs/api/component#metadata"},(0,r.kt)("inlineCode",{parentName:"a"},"metadata")),". This property is ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," when the lifecycle methods are run for the first time, but is ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," for all subsequent updates."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"render(stateChanges) {\n    if (!this.metadata.initialized) {\n        /* first render only */\n    }\n}\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"initialized")," property can also be used to skip the first render."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"render(stateChanges) {\n    if (this.metadata.initialized) {\n        /* skip the first render */\n    }\n}\n")),(0,r.kt)("br",null),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"using-the-previous-state"},"Using the Previous State"),(0,r.kt)("p",null,"In less common scenarios, the data from the previous state may be required to accurately determine what actions to perform. If needed, the previous state is passed as the second argument."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"render(stateChanges, previousState) {\n    if (this.state.flavor !== previousState.flavor) {\n        /* do something ... */\n    }\n}\n")))}c.isMDXComponent=!0}}]);