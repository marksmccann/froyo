!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).froyojs={})}(this,(function(e){"use strict";const t=Symbol("component");function n(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function o(e,t,n){"string"==typeof n&&t.innerHTML!==n&&(t.innerHTML=n)}function r(e,t,r){"string"==typeof r?o(0,t,r):n(r)&&(function(e,t,o){n(o)&&Object.entries(o).forEach((([e,n])=>{"string"==typeof n?t.setAttribute(e,n):null===n?t.removeAttribute(e):"boolean"==typeof n&&(n?t.setAttribute(e,""):t.removeAttribute(e))}))}(0,t,r.attributes),function(e,t,o){n(o)&&Object.entries(o).forEach((([e,n])=>{n?t.classList.add(e):t.classList.remove(e)}))}(0,t,r.classes),o(0,t,r.content),function(e,t,n){t instanceof HTMLElement&&"object"==typeof n&&null!==n&&Object.entries(n).forEach((([e,n])=>{"string"==typeof n?t.style.setProperty(e,n):null===n&&t.style.removeProperty(e)}))}(0,t,r.style))}function c(e){e.forEach((([e,t])=>{const n=this[e],o=Array.isArray(n);let c=[];o?c=n:null!==n&&c.push(n),c.forEach(((e,n)=>{const c=o?n:void 0,s=t.call(this,c);e instanceof Text?function(e,t,n){"string"==typeof n&&t.nodeValue!==n&&(t.nodeValue=n)}(0,e,s):r(0,e,s)}))}))}e.createInitializer=function(e){return function(){const n=document.querySelectorAll("[data-init]"),o=[];return n.forEach((n=>{const r=n.getAttribute("data-init")||"",c=e[r];r in e&&c.$$typeof===t&&(n.removeAttribute("data-initialize"),o.push(new c(n)))})),o}},e.defineComponent=function(e){var n;const o=e.name||"Unnamed component",r=e.state||{},s=e.nodes||{},i=e.data||{},a=e.components||{},l=e.events||{},f=e.render||{},u=e.hooks||{},d=new Set,y=new Set,p=new Map,b=new Set,h=new Set;let m=!1;const E=new Proxy({},{set(e,t,n){const o=e[t],s=t in r;let i=n!==o,l=n;if(s&&void 0===l&&(l=r[t].default,i=l!==o),e[t]=l,m&&s&&i){const r=p.get(t);c.call(e,y),r&&r.call(e,n,o),h.forEach((([e,r])=>{t===e&&r.call(void 0,n,o)})),b.forEach((([t,n])=>{const{state:o}=a[t].call(e);o&&n.setState(o)}))}return!0}});return(n=class{static get displayName(){return o}get root(){return E.$root}get state(){const e={};return Object.keys(r).forEach((t=>{t in E&&(e[t]=E[t])})),e}constructor(e,t={}){let n=null,o={};if("string"==typeof e?n=document.querySelector(e):e instanceof Element&&(n=e),!n)throw new Error("An unknown error has ocurred");E.$root=n;try{const e=n.getAttribute("data-state");null!==e&&(o=JSON.parse(e))}catch{}Object.keys(r).forEach((e=>{let n;e in o&&(n=o[e]),e in t&&(n=t[e]),E[e]=n})),Object.entries(s).forEach((([e,t])=>{const{type:n}=t;let o=null;if("text"===n)o=document.createTextNode(t.value||"");else if("element"===n&&t.tagName)o=document.createElement(t.tagName);else if("svg"===n&&t.tagName)o=document.createElementNS("http://www.w3.org/2000/svg",t.tagName);else if("query"===n&&t.selector){const{selector:e,optional:n}=t;o=(t.scope||E.$root).querySelector(e)}else if("query-all"===n&&t.selector){const{selector:e,optional:n}=t,r=t.scope||E.$root;o=Array.from(r.querySelectorAll(e)),o.length}E[e]=o})),Object.entries(i).forEach((([e,t])=>{let n=t;"function"==typeof t&&(n=t.bind(E)),E[e]=n})),Object.entries(l).forEach((([e,t])=>{let n=[];const o=E[e];"$window"===e?n.push(window):"$document"===e?n.push(document):Array.isArray(o)?n=o:o&&n.push(o),n.forEach(((e,n)=>{const r=Array.isArray(o)?n:void 0,c=t.call(E,r);d.add(function(e,t,n){const o=new Set;return Object.entries(n).forEach((([e,n])=>{const r=/^(focus|blur)$/.test(e);"function"==typeof n&&(t.addEventListener(e,n,r),o.add((()=>{t.removeEventListener(e,n,r)})))})),()=>{o.forEach((e=>e()))}}(0,e,c))}))})),Object.entries(a).forEach((([e,t])=>{const n=t.call(E),{constructor:o,subscribe:r}=n,c=new o(n.root,n.state);r&&Object.entries(r).forEach((([e,t])=>{"function"==typeof t?c.subscribe(e,t):o.displayName})),b.add([e,c]),d.add((()=>c.destroy()))})),Object.entries(u).forEach((([e,t])=>{if("$setup"===e)t.call(E);else if("$teardown"===e)d.add(t.bind(E));else if(e in r){const n=E[e];t.call(E,n,n),p.set(e,t)}})),Object.entries(f).forEach((([e,t])=>{e in E&&y.add([e,t])})),c.call(E,y),m=!0}destroy(){d.forEach((e=>e()))}setState(e){Object.entries(e).forEach((([e,t])=>{e in r&&(r[e].readonly||(E[e]=t))}))}subscribe(e,t){if(!(e in E))return;if("function"!=typeof t)return;Array.from(h).find((n=>n[0]===e&&n[1]===t))||h.add([e,t])}unsubscribe(e,t){if(!(e in E))return;if("function"!=typeof t)return;const n=Array.from(h).find((n=>n[0]===e&&n[1]===t));n&&h.delete(n)}}).$$typeof=t,n}}));
